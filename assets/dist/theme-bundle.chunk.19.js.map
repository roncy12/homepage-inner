{"version":3,"sources":["webpack:///./assets/js/theme/category.js"],"names":["Category","onReady","$","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","context","enableSwatches","swatchPreview","enableSizes","sizePreview","enableInfiniteScrolling","productCount","productTotal","initInfiniteScroll","rebuild","infiniteScroll","InfiniteScroll","path","append","hideNav","scrollThreshold","onInit","hide","enableImageHoverSwitcher","imageHover","destroy","initFacetedScroll","$pagination","$productListingContainer","$facetedSearchContainer","productsPerPage","categoryProductsPerPage","requestOptions","config","category","shop_by_price","products","limit","template","productListing","sidebar","showMore","facetedSearch","FacetedSearch","content","html","animate","scrollTop","CatalogPage"],"mappings":"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","file":"theme-bundle.chunk.19.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\nimport CatalogPage from './catalog';\nimport $ from 'jquery';\nimport FacetedSearch from './common/faceted-search';\nimport imageHover from './f/image-hover';\nimport sizePreview from './f/size-preview';\nimport swatchPreview from './f/swatch-preview';\nimport InfiniteScroll from 'infinite-scroll';\n\nexport default class Category extends CatalogPage {\n    onReady() {\n        if ($('#facetedSearch').length > 0) {\n            this.initFacetedSearch();\n        } else {\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\n        }\n\n        // Load swatches onto product grid if enabled\n        if (this.context.enableSwatches) {\n            swatchPreview();\n        }\n\n        if (this.context.enableSizes) {\n            sizePreview();\n        }\n\n        // Start Infinite Scroll if enabled\n        if (this.context.enableInfiniteScrolling && this.context.productCount < this.context.productTotal) {\n            this.initInfiniteScroll();\n        }\n    }\n\n    initInfiniteScroll(rebuild) {\n        const infiniteScroll = new InfiniteScroll('.page-content', {\n            path: '.pagination-link--next',\n            append: '.productCategoryCompare',\n            hideNav: '.pagination',\n            scrollThreshold: 750,\n            onInit: () => {\n                $('.productCount').hide();\n            },\n        });\n\n        infiniteScroll.on('append', () => {\n            // Load swatches onto filtered product grid if enabled\n            if (this.context.enableSwatches) {\n                swatchPreview();\n            }\n\n            if (this.context.enableSizes) {\n                sizePreview();\n            }\n\n            if (this.context.enableImageHoverSwitcher) {\n                imageHover();\n            }\n        });\n\n        if (rebuild) {\n            infiniteScroll.destroy();\n        }\n    }\n\n    initFacetedScroll() {\n        const $pagination = $('.pagination-link--next');\n\n        this.initInfiniteScroll('rebuild');\n\n        if ($pagination.length) {\n            this.initInfiniteScroll();\n        }\n    }\n\n    initFacetedSearch() {\n        const $productListingContainer = $('#product-listing-container');\n        const $facetedSearchContainer = $('#faceted-search-container');\n        const productsPerPage = this.context.categoryProductsPerPage;\n        const requestOptions = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: productsPerPage,\n                    },\n                },\n            },\n            template: {\n                productListing: 'category/product-listing',\n                sidebar: 'category/sidebar',\n            },\n            showMore: 'category/show-more',\n        };\n\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\n            $productListingContainer.html(content.productListing);\n            $facetedSearchContainer.html(content.sidebar);\n\n            // Start Infinite Scroll if enabled\n            if (this.context.enableInfiniteScrolling && this.context.productCount < this.context.productTotal) {\n                this.initFacetedScroll();\n            }\n\n            $('html, body').animate({\n                scrollTop: 0,\n            }, 100);\n\n            // Load swatches onto filtered product grid if enabled\n            if (this.context.enableSwatches) {\n                swatchPreview();\n            }\n\n            if (this.context.enableSizes) {\n                sizePreview();\n            }\n\n            if (this.context.enableImageHoverSwitcher) {\n                imageHover();\n            }\n        });\n    }\n}\n"],"sourceRoot":""}